!function(t){"use strict";"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t():"undefined"!=typeof Package?Sortable=t():window.Sortable=t()}(function(){"use strict";function t(t,e){this.el=t,this.options=e=m({},e),t[X]=this;var o={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,cursorAt:!1};for(var i in o)!(i in e)&&(e[i]=o[i]);var r=e.group;r&&"object"==typeof r||(r=e.group={name:r}),["pull","put"].forEach(function(t){t in r||(r[t]=!0)}),e.groups=" "+r.name+(r.put.join?" "+r.put.join(" "):"")+" ";for(var a in this)"_"===a.charAt(0)&&(this[a]=this[a].bind(this));n(t,"mousedown",this._onTapStart),n(t,"touchstart",this._onTapStart),n(t,"dragover",this),n(t,"dragenter",this),H.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function e(t){b&&b.state!==t&&(s(b,"display",t?"none":""),!t&&b.state&&y.insertBefore(b,D),b.state=t)}function o(t,e,o){if(t){o=o||L,e=e.split(".");var i=e.shift().toUpperCase(),n=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");do if(">*"===i&&t.parentNode===o||(""===i||t.nodeName.toUpperCase()==i)&&(!e.length||((" "+t.className+" ").match(n)||[]).length==e.length))return t;while(t!==o&&(t=t.parentNode))}return null}function i(t){t.dataTransfer.dropEffect="move",t.preventDefault()}function n(t,e,o){t.addEventListener(e,o,!1)}function r(t,e,o){t.removeEventListener(e,o,!1)}function a(t,e,o){if(t)if(t.classList)t.classList[o?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Y," ").replace(" "+e+" "," ");t.className=(i+(o?" "+e:"")).replace(Y," ")}}function s(t,e,o){var i=t&&t.style;if(i){if(void 0===o)return L.defaultView&&L.defaultView.getComputedStyle?o=L.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];e in i||(e="-webkit-"+e),i[e]=o+("string"==typeof o?"":"px")}}function l(t,e,o){if(t){var i=t.getElementsByTagName(e),n=0,r=i.length;if(o)for(;r>n;n++)o(i[n],n);return i}return[]}function d(t,e,o,i,n,r,a){var s=L.createEvent("Event"),l=(t||e[X]).options,d="on"+o.charAt(0).toUpperCase()+o.substr(1);s.initEvent(o,!0,!0),s.to=e,s.from=n||e,s.item=i||e,s.clone=b,s.oldIndex=r,s.newIndex=a,e.dispatchEvent(s),l[d]&&l[d].call(t,s)}function c(t,e,o,i,n,r){var a,s,l=t[X],d=l.options.onMove;return a=L.createEvent("Event"),a.initEvent("move",!0,!0),a.to=e,a.from=t,a.dragged=o,a.draggedRect=i,a.related=n||e,a.relatedRect=r||e.getBoundingClientRect(),t.dispatchEvent(a),d&&(s=d.call(l,a)),s}function h(t){t.draggable=!1}function u(){P=!1}function f(t,e){var o=t.lastElementChild,i=o.getBoundingClientRect();return e.clientY-(i.top+i.height)>5&&o}function p(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,i=0;o--;)i+=e.charCodeAt(o);return i.toString(36)}function g(t){for(var e=0;t&&(t=t.previousElementSibling);)"TEMPLATE"!==t.nodeName.toUpperCase()&&e++;return e}function v(t,e){var o,i;return function(){void 0===o&&(o=arguments,i=this,setTimeout(function(){1===o.length?t.call(i,o[0]):t.apply(i,o),o=void 0},e))}}function m(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}var D,_,b,y,S,T,C,w,E,x,A,N,O,B,I,R={},Y=/\s+/g,X="Sortable"+(new Date).getTime(),k=window,L=k.document,M=k.parseInt,U=!!("draggable"in L.createElement("div")),P=!1,W=Math.abs,H=([].slice,[]),j=v(function(t,e,o){if(o&&e.scroll){var i,n,r,a,s=e.scrollSensitivity,l=e.scrollSpeed,d=t.clientX,c=t.clientY,h=window.innerWidth,u=window.innerHeight;if(C!==o&&(T=e.scroll,C=o,T===!0)){T=o;do if(T.offsetWidth<T.scrollWidth||T.offsetHeight<T.scrollHeight)break;while(T=T.parentNode)}T&&(i=T,n=T.getBoundingClientRect(),r=(W(n.right-d)<=s)-(W(n.left-d)<=s),a=(W(n.bottom-c)<=s)-(W(n.top-c)<=s)),r||a||(r=(s>=h-d)-(s>=d),a=(s>=u-c)-(s>=c),(r||a)&&(i=k)),(R.vx!==r||R.vy!==a||R.el!==i)&&(R.el=i,R.vx=r,R.vy=a,clearInterval(R.pid),i&&(R.pid=setInterval(function(){i===k?k.scrollTo(k.pageXOffset+r*l,k.pageYOffset+a*l):(a&&(i.scrollTop+=a*l),r&&(i.scrollLeft+=r*l))},24)))}},30);return t.prototype={constructor:t,_onTapStart:function(t){var e=this,i=this.el,n=this.options,r=t.type,a=t.touches&&t.touches[0],s=(a||t).target,l=s,c=n.filter;if(!("mousedown"===r&&0!==t.button||n.disabled)&&(s=o(s,n.draggable,i))){if(x=g(s),"function"==typeof c){if(c.call(this,t,s,this))return d(e,l,"filter",s,i,x),void t.preventDefault()}else if(c&&(c=c.split(",").some(function(t){return t=o(l,t.trim(),i),t?(d(e,t,"filter",s,i,x),!0):void 0})))return void t.preventDefault();(!n.handle||o(l,n.handle,i))&&this._prepareDragStart(t,a,s)}},_prepareDragStart:function(t,e,o){var i,r=this,a=r.el,s=r.options,d=a.ownerDocument;o&&!D&&o.parentNode===a&&(O=t,y=a,D=o,S=D.nextSibling,N=s.group,i=function(){r._disableDelayedDrag(),D.draggable=!0,s.ignore.split(",").forEach(function(t){l(D,t.trim(),h)}),r._triggerDragStart(e)},n(d,"mouseup",r._onDrop),n(d,"touchend",r._onDrop),n(d,"touchcancel",r._onDrop),s.delay?(n(d,"mouseup",r._disableDelayedDrag),n(d,"touchend",r._disableDelayedDrag),n(d,"touchcancel",r._disableDelayedDrag),n(d,"mousemove",r._disableDelayedDrag),n(d,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(i,s.delay)):i())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(t,"mouseup",this._disableDelayedDrag),r(t,"touchend",this._disableDelayedDrag),r(t,"touchcancel",this._disableDelayedDrag),r(t,"mousemove",this._disableDelayedDrag),r(t,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(t){t?(O={target:D,clientX:t.clientX,clientY:t.clientY},this._onDragStart(O,"touch")):!U||this.options.forceFallback?this._onDragStart(O,!0):(n(D,"dragend",this),n(y,"dragstart",this._onDragStart));try{L.selection?L.selection.empty():window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){y&&D&&(a(D,this.options.ghostClass,!0),t.active=this,d(this,y,"start",D,y,x))},_emulateDragOver:function(){if(B){s(_,"display","none");var t=L.elementFromPoint(B.clientX,B.clientY),e=t,o=" "+this.options.group.name,i=H.length;if(e)do{if(e[X]&&e[X].options.groups.indexOf(o)>-1){for(;i--;)H[i]({clientX:B.clientX,clientY:B.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);s(_,"display","")}},_onTouchMove:function(e){if(O){var o=e.touches?e.touches[0]:e;if(!t.active){this._dragStarted(),this._appendGhost();var i=_.getBoundingClientRect();this.touchOffsetX=o.clientX-i.left,this.touchOffsetY=o.clientY-i.top,this.cursorOffsetLeft=this.options.cursorAt&&this.options.cursorAt.left?this.touchOffsetX-this.options.cursorAt.left:0,this.cursorOffsetTop=this.options.cursorAt&&this.options.cursorAt.top?this.touchOffsetY-this.options.cursorAt.top:0}var n=o.clientX-O.clientX+this.cursorOffsetLeft,r=o.clientY-O.clientY+this.cursorOffsetTop,a=e.touches?"translate3d("+n+"px,"+r+"px,0)":"translate("+n+"px,"+r+"px)";B=o,I=!0,s(_,"webkitTransform",a),s(_,"mozTransform",a),s(_,"msTransform",a),s(_,"transform",a),e.preventDefault()}},_appendGhost:function(){if(!_){var t,e=D.getBoundingClientRect(),o=s(D);_=D.cloneNode(!0),a(_,this.options.ghostClass,!1),a(_,this.options.fallbackClass,!0),s(_,"top",e.top-M(o.marginTop,10)),s(_,"left",e.left-M(o.marginLeft,10)),s(_,"width",e.width),s(_,"height",e.height),s(_,"opacity","0.8"),s(_,"position","fixed"),s(_,"zIndex","100000"),this.options.fallbackOnBody&&L.body.appendChild(_)||y.appendChild(_),t=_.getBoundingClientRect(),s(_,"width",2*e.width-t.width),s(_,"height",2*e.height-t.height)}},_onDragStart:function(t,e){var o=t.dataTransfer,i=this.options;this._offUpEvents(),"clone"==N.pull&&(b=D.cloneNode(!0),s(b,"display","none"),y.insertBefore(b,D)),e?("touch"===e?(n(L,"touchmove",this._onTouchMove),n(L,"touchend",this._onDrop),n(L,"touchcancel",this._onDrop)):(n(L,"mousemove",this._onTouchMove),n(L,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,150)):(o&&(o.effectAllowed="move",i.setData&&i.setData.call(this,o,D)),this.options.cursorAt&&t.dataTransfer.setDragImage&&t.dataTransfer.setDragImage(D,this.options.cursorAt.left,this.options.cursorAt.top),n(L,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(t){var i,n,r,a=this.el,l=this.options,d=l.group,h=d.put,p=N===d,g=l.sort;if(void 0!==t.preventDefault&&(t.preventDefault(),!l.dragoverBubble&&t.stopPropagation()),N&&!l.disabled&&(p?g||(r=!y.contains(D)):N.pull&&h&&(N.name===d.name||h.indexOf&&~h.indexOf(N.name)))&&(void 0===t.rootEl||t.rootEl===this.el)){if(j(t,l,this.el),P)return;if(i=o(t.target,l.draggable,a),n=D.getBoundingClientRect(),r)return e(!0),void(b||S?y.insertBefore(D,b||S):g||y.appendChild(D));if(0===a.children.length||a.children[0]===_||a===t.target&&(i=f(a,t))){if(i){if(i.animated)return;m=i.getBoundingClientRect()}e(p),c(y,a,D,n,i,m)!==!1&&(a.appendChild(D),this._animate(n,D),i&&this._animate(m,i))}else if(i&&!i.animated&&i!==D&&void 0!==i.parentNode[X]){w!==i&&(w=i,E=s(i));var v,m=i.getBoundingClientRect(),T=m.right-m.left,C=m.bottom-m.top,x=/left|right|inline/.test(E.cssFloat+E.display),A=i.offsetWidth>D.offsetWidth,O=i.offsetHeight>D.offsetHeight,B=(x?(t.clientX-m.left)/T:(t.clientY-m.top)/C)>.5,I=i.nextElementSibling,R=c(y,a,D,n,i,m);R!==!1&&(P=!0,setTimeout(u,30),e(p),v=1===R||-1===R?1===R:x?i.previousElementSibling===D&&!A||B&&A:I!==D&&!O||B&&O,v&&!I?a.appendChild(D):i.parentNode.insertBefore(D,v?I:i),this._animate(n,D),this._animate(m,i))}}},_animate:function(t,e){var o=this.options.animation;if(o){var i=e.getBoundingClientRect();s(e,"transition","none"),s(e,"transform","translate3d("+(t.left-i.left)+"px,"+(t.top-i.top)+"px,0)"),e.offsetWidth,s(e,"transition","all "+o+"ms"),s(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){s(e,"transition",""),s(e,"transform",""),e.animated=!1},o)}},_offUpEvents:function(){var t=this.el.ownerDocument;r(L,"touchmove",this._onTouchMove),r(t,"mouseup",this._onDrop),r(t,"touchend",this._onDrop),r(t,"touchcancel",this._onDrop)},_onDrop:function(e){var o=this.el,i=this.options;clearInterval(this._loopId),clearInterval(R.pid),clearTimeout(this._dragStartTimer),r(L,"drop",this),r(L,"mousemove",this._onTouchMove),r(o,"dragstart",this._onDragStart),this._offUpEvents(),e&&(I&&(e.preventDefault(),!i.dropBubble&&e.stopPropagation()),_&&_.parentNode.removeChild(_),D&&(r(D,"dragend",this),h(D),a(D,this.options.ghostClass,!1),y!==D.parentNode?(A=g(D),d(null,D.parentNode,"sort",D,y,x,A),d(this,y,"sort",D,y,x,A),d(null,D.parentNode,"add",D,y,x,A),d(this,y,"remove",D,y,x,A)):(b&&b.parentNode.removeChild(b),D.nextSibling!==S&&(A=g(D),d(this,y,"update",D,y,x,A),d(this,y,"sort",D,y,x,A))),t.active&&(d(this,y,"end",D,y,x,A),this.save())),y=D=_=S=b=T=C=O=B=I=w=E=N=t.active=null)},handleEvent:function(t){var e=t.type;"dragover"===e||"dragenter"===e?D&&(this._onDragOver(t),i(t)):("drop"===e||"dragend"===e)&&this._onDrop(t)},toArray:function(){for(var t,e=[],i=this.el.children,n=0,r=i.length,a=this.options;r>n;n++)t=i[n],o(t,a.draggable,this.el)&&e.push(t.getAttribute(a.dataIdAttr)||p(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach(function(t,n){var r=i.children[n];o(r,this.options.draggable,i)&&(e[t]=r)},this),t.forEach(function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return o(t,e||this.options.draggable,this.el)},option:function(t,e){var o=this.options;return void 0===e?o[t]:void(o[t]=e)},destroy:function(){var t=this.el;t[X]=null,r(t,"mousedown",this._onTapStart),r(t,"touchstart",this._onTapStart),r(t,"dragover",this),r(t,"dragenter",this),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),H.splice(H.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},t.utils={on:n,off:r,css:s,find:l,is:function(t,e){return!!o(t,e,t)},extend:m,throttle:v,closest:o,toggleClass:a,index:g},t.version="1.2.1",t.create=function(e,o){return new t(e,o)},t});
