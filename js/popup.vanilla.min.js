function sort_li(e,t){return+e.dataset.index-+t.dataset.index}var Bookmarks={},clicked;document.getElementById("header").innerHTML=chrome.i18n.getMessage("add_bookmark_to");var myStorage=chrome.storage.local;myStorage.get(["bookmarks"],function(e){if(e.bookmarks){Bookmarks=e.bookmarks,Groups={};for(var t in Bookmarks)Groups[t]={},Groups[t].subgroups={},Object.keys(Bookmarks[t]).forEach(function(e){"properties"==e?Groups[t].properties=Bookmarks[t].properties:isNaN(e)&&(Groups[t].subgroups[e]=Bookmarks[t][e].properties)});for(var o in Groups){if(Groups[o].properties.icon)var i="<span class='"+Groups[o].properties.icon+"'></span>";else var i="<span class='icon-ok' style='opacity:0;'></span>";if(Groups[o].properties.title)var r=Groups[o].properties.title;else var r="";var s="&nbsp;&nbsp;&nbsp;",n=document.getElementById("groups"),a='<li id="'+o+'" data-index="'+Groups[o].properties.i+'"><t>'+i+s+r+"</t><ul></ul></li>";n.insertAdjacentHTML("beforeend",a);for(t in Groups[o].subgroups){var p='<li id="'+t+'" data-index="'+Groups[o].subgroups[t].i+'">'+Groups[o].subgroups[t].title+"</li>";n.lastChild.querySelector("ul").insertAdjacentHTML("beforeend",p)}}var l=n.childNodes;toSort=Array.prototype.slice.call(l,0),toSort.sort(sort_li),n.innerHTML="";for(var u=0;u<toSort.length;u++)n.appendChild(toSort[u]);Object.keys(l).forEach(function(e){var t=l[e].querySelector("ul"),o=t.childNodes;toSort=Array.prototype.slice.call(o,0),toSort.sort(sort_li),t.innerHTML="";for(var i=toSort.length,r=0;i>r;r++)i>0&&(t.parentElement.setAttribute("n-of-child",i),t.insertAdjacentHTML("beforebegin",'<span class="icon-down-open-mini"></span>'),t.appendChild(toSort[r]))})}}),document.getElementsByClassName("icon-down-open-mini").onclick=function(e){var t=e.parentElement;console.log("kek"),!t.classList.contains("open")};